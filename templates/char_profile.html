{% extends 'base.html'%} {% block content %}
<div class="d-flex justify-content-center">
<h1>{{character.content.Name}}</h1>
</div>
<div class="container">
<div class="card">
  <h5 class="card-header">Vital statistics:</h5>
  <div class="card-body">
    <h5 class="card-title">{{character.content.CharClass}}</h5>
    <p class="card-text">Character level: {{character.content.ClassObj.Lvl}}</p>
    <p class="card-text" id="prof">Proficiency: </p>
    <p class="card-text">Attacks per round: {{character.content.ClassObj.AttacksPerRound}}</p>
  </div>
</div>
</div>
<br>
<br>
<div class="container">
  <div class="row">    
    <br />
    <div class="card col" style="width: 18rem">
      <div class="card-body">
        <h5 class="card-title">Appearance:</h5>
        <p class="card-text">{{character.content.Appearance}}</p>
      </div>
    </div>
    <div class="card col" style="width: 18rem">
      <div class="card-body">
        <h5 class="card-title">Backstory & concept:</h5>
        <p class="card-text">{{character.content.CharDescription}}</p>
      </div>
    </div>
  </div>
</div>
<br>
<br>
<div class="container">
  <div class="row">
    <table class="table table-borderless">
      <thead>
        <th class="col">Attributes:</th>
        <th class="col">Strength</th>
        <th class="col">Dexterity</th>
        <th class="col">Constitution</th>
        <th class="col">Intelligence</th>
        <th class="col">Wisdom</th>
        <th class="col">Charisma</th>
      </thead>
      <tr>
        <th>Base value:</th>
        <th id="str" class="col base">
          {{character.content.AttributeList.strength}}
        </th>
        <th id="dex" class="col base">
          {{character.content.AttributeList.dexterity}}
        </th>
        <th id="con" class="col base">
          {{character.content.AttributeList.constitution}}
        </th>
        <th id="int" class="col base">
          {{character.content.AttributeList.intelligence}}
        </th>
        <th id="wis" class="col base">
          {{character.content.AttributeList.wisdom}}
        </th>
        <th id="cha" class="col base">
          {{character.content.AttributeList.charisma}}
        </th>
      </tr>
      <tr>
        <tr>
          <th>Modifier:</th>
          <th id="str-mod" class="col">
            {{character.content.AttributeList.strength}}
          </th>
          <th id="dex-mod" class="col">
            {{character.content.AttributeList.dexterity}}
          </th>
          <th id="con-mod" class="col">
            {{character.content.AttributeList.constitution}}
          </th>
          <th id="int-mod" class="col">
            {{character.content.AttributeList.intelligence}}
          </th>
          <th id="wis-mod" class="col">
            {{character.content.AttributeList.wisdom}}
          </th>
          <th id="cha-mod" class="col">
            {{character.content.AttributeList.charisma}}
          </th>
        </tr>
        <th>Roll:</th>
        <th id="str-die" class="col">
          <i class="fas fa-dice-d20"></i>
        </th>
        <th id="dex-die" class="col">
          <i class="fas fa-dice-d20"></i>
        </th>
        <th id="con-die" class="col">
          <i class="fas fa-dice-d20"></i>
        </th>
        <th id="int-die" class="col">
          <i class="fas fa-dice-d20"></i>
        </th>
        <th id="wis-die" class="col">
          <i class="fas fa-dice-d20"></i>
        </th>
        <th id="cha-die" class="col">
          <i class="fas fa-dice-d20"></i>
        </th>
      </tr>
    </table>
  </div>
</div>
<br>
<br>

<script type="text/javascript">
  // This variable is not well-written JS, but it exists only to pass a working copy of the data to the FrontEnd for the DOM to use.
  $SCRIPT_ROOT = {{ request.script_root|tojson}}
  $(document).ready(function(){
      $.post($SCRIPT_ROOT, function( data ){
      });
      
      $(".base").each(function(i) {
        let baseAttr = parseInt($( this ).text());
        let modAttr = (baseAttr -10) / 2
        let idString = $(this).attr('id');
        console.log(idString)

        if (modAttr => 0) {
            $('#'+idString+"-mod").text('+'+modAttr)
        }
        else{
          $('#'+idString+"-mod").text('-'+modAttr)

        }

      });
      
  });


</script>


{% endblock %}
